
    <div class="constituency-lookup-failed" style="display: none">
        Error finding constituency in the list. Check the SEO title.
    </div>

    <div class="constituency-spread"></div>
    <div class="constituency-legend"></div>
    <div class="constituency-meta"></div>
    <div class="constituency-seats"></div>
    <div class="constituency-count-table" role="grid" aria-labelledby="constituency results table" aria-readonly="true"></div>
    <div class="ganimation-container"><h3 class="ge-sub-heading">Story of the count</h3><div class="ganimation-ctrl-btns"><button class="ganimation-play-btn"><i class="fa fa-play"></i> Play</button><button class="ganimation-pause-btn" disabled="disabled"><i class="fa fa-pause"></i> Pause</button><button class="ganimation-restart-btn" disabled="disabled"><i class="fa fa-refresh"></i> Restart</button><span class="ganimation-count-id">Count: 1 / 9</span></div><table class="ganimation-table" style="height: 630px;"><tbody><tr class="candidate-row" data-candidate-id="0" data-sort-order="0" style="height: 35px; line-height: 35px; top: 0px;"><td class="candidate-name" style="line-height: 35px;">Ó Caoláin, Caoimhghín</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-SF" data-votes="11913" style="width: 100.278%;">11,913</span></td></tr><tr class="candidate-row" data-candidate-id="1" data-sort-order="1" style="height: 35px; line-height: 35px; top: 45px;"><td class="candidate-name" style="line-height: 35px;">Conlan, Seán</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-FG" data-votes="7864" style="width: 66.1953%;">7,864</span></td></tr><tr class="candidate-row" data-candidate-id="2" data-sort-order="2" style="height: 35px; line-height: 35px; top: 90px;"><td class="candidate-name" style="line-height: 35px;">Conlon, Margaret</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-FF" data-votes="4658" style="width: 39.2088%;">4,658</span></td></tr><tr class="candidate-row" data-candidate-id="3" data-sort-order="3" style="height: 35px; line-height: 35px; top: 135px;"><td class="candidate-name" style="line-height: 35px;">Duffy, Joseph</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-IND" data-votes="129" style="width: 1.08586%;">129</span></td></tr><tr class="candidate-row" data-candidate-id="4" data-sort-order="4" style="height: 35px; line-height: 35px; top: 180px;"><td class="candidate-name" style="line-height: 35px;">Forde, Caroline</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-IND" data-votes="1912" style="width: 16.0943%;">1,912</span></td></tr><tr class="candidate-row" data-candidate-id="5" data-sort-order="5" style="height: 35px; line-height: 35px; top: 225px;"><td class="candidate-name" style="line-height: 35px;">Hogan, Liam</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-LAB" data-votes="4011" style="width: 33.7626%;">4,011</span></td></tr><tr class="candidate-row" data-candidate-id="6" data-sort-order="6" style="height: 35px; line-height: 35px; top: 270px;"><td class="candidate-name" style="line-height: 35px;">Humphreys, Heather</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-FG" data-votes="8144" style="width: 68.5522%;">8,144</span></td></tr><tr class="candidate-row" data-candidate-id="7" data-sort-order="7" style="height: 35px; line-height: 35px; top: 315px;"><td class="candidate-name" style="line-height: 35px;">Lonergan, Darcy</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-GP" data-votes="530" style="width: 4.46128%;">530</span></td></tr><tr class="candidate-row" data-candidate-id="8" data-sort-order="8" style="height: 35px; line-height: 35px; top: 360px;"><td class="candidate-name" style="line-height: 35px;">McGuirk, John</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-IND" data-votes="1708" style="width: 14.3771%;">1,708</span></td></tr><tr class="candidate-row" data-candidate-id="9" data-sort-order="9" style="height: 35px; line-height: 35px; top: 405px;"><td class="candidate-name" style="line-height: 35px;">McVitty, Peter</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-FG" data-votes="3858" style="width: 32.4747%;">3,858</span></td></tr><tr class="candidate-row" data-candidate-id="10" data-sort-order="10" style="height: 35px; line-height: 35px; top: 450px;"><td class="candidate-name" style="line-height: 35px;">O'Reilly, Joe</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-FG" data-votes="8333" style="width: 70.1431%;">8,333</span></td></tr><tr class="candidate-row" data-candidate-id="11" data-sort-order="11" style="height: 35px; line-height: 35px; top: 495px;"><td class="candidate-name" style="line-height: 35px;">Reilly, Kathryn</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-SF" data-votes="6539" style="width: 55.0421%;">6,539</span></td></tr><tr class="candidate-row" data-candidate-id="12" data-sort-order="12" style="height: 35px; line-height: 35px; top: 540px;"><td class="candidate-name" style="line-height: 35px;">Smith, Brendan</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-FF" data-votes="9702" style="width: 81.6667%;">9,702</span></td></tr><tr class="candidate-row" data-candidate-id="13" data-sort-order="13" style="height: 35px; line-height: 35px; top: 585px;"><td class="candidate-name" style="line-height: 35px;">Treanor, Seamus</td><td class="candidate-votes" style="line-height: 35px;"><span class="candidate-votes-fill party-IND" data-votes="1974" style="width: 16.6162%;">1,974</span></td></tr></tbody><span class="ganimation-border ganimation-elected-bar" style="top: 34.9206%;"></span><span class="ganimation-border ganimation-quota-bar"></span></table></div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="http://www.irishtimes.com/static/js/ejs.js"></script>
    <script src="../plugins/js/jquery.constituency-page.js"></script>
    <script src="../plugins/js/result-table.js"></script>
    <script src="../plugins/js/velocity.min.js"></script>
    <script src="../plugins/js/jquery.ganimation.js"></script>
    <script>

        var jq = jQuery.noConflict(true);

        var constituencyLookup = [
            {
                "name": "Carlow-Kilkenny",
                "code": "CKY",
                "region": "Leinster",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Cavan-Monaghan",
                "code": "CMN",
                "region": "Ulster-Connacht",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Clare",
                "code": "CLR",
                "region": "Munster",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Cork East",
                "code": "CET",
                "region": "Munster",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Cork North-Central",
                "code": "CNC",
                "region": "Munster",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Cork North-West",
                "code": "CNW",
                "region": "Munster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Cork South-Central",
                "code": "CSC",
                "region": "Munster",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Cork South-West",
                "code": "CSW",
                "region": "Munster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Donegal North East",
                "code": "DNE",
                "region": "Ulster-Connacht",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Donegal South-West",
                "code": "DSW",
                "region": "Ulster-Connacht",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Dublin Central",
                "code": "DCL",
                "region": "Dublin",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Dublin Mid-West",
                "code": "DMW",
                "region": "Dublin",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Dublin North",
                "code": "DNO",
                "region": "Dublin",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Dublin North Central",
                "code": "DNC",
                "region": "Dublin",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Dublin North East",
                "code": "DNT",
                "region": "Dublin",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Dublin North-West",
                "code": "DNW",
                "region": "Dublin",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Dublin South",
                "code": "DSO",
                "region": "Dublin",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Dublin South-Central",
                "code": "DSC",
                "region": "Dublin",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Dublin South-East",
                "code": "DSE",
                "region": "Dublin",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Dublin South-West",
                "code": "DST",
                "region": "Dublin",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Dublin West",
                "code": "DWT",
                "region": "Dublin",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Dún Laoghaire",
                "code": "DLR",
                "region": "Dublin",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Galway East",
                "code": "GET",
                "region": "Ulster-Connacht",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Galway West",
                "code": "GWT",
                "region": "Ulster-Connacht",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Kerry North-Limerick West",
                "code": "KNL",
                "region": "Munster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Kerry South",
                "code": "KYS",
                "region": "Munster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Kildare North",
                "code": "KNO",
                "region": "Leinster",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Kildare South",
                "code": "KSO",
                "region": "Leinster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Laois-Offaly",
                "code": "LOY",
                "region": "Leinster",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Limerick",
                "code": "LIM",
                "region": "Munster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Limerick City",
                "code": "LMC",
                "region": "Munster",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Longford-Westmeath",
                "code": "LRW",
                "region": "Leinster",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Louth",
                "code": "LTH",
                "region": "Leinster",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Mayo",
                "code": "MYO",
                "region": "Ulster-Connacht",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Meath East",
                "code": "MTE",
                "region": "Leinster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Meath West",
                "code": "MTW",
                "region": "Leinster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Roscommon-South Leitrim",
                "code": "RLS",
                "region": "Ulster-Connacht",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Sligo-North Leitrim",
                "code": "SLN",
                "region": "Ulster-Connacht",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Tipperary North",
                "code": "TNO",
                "region": "Munster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Tipperary South",
                "code": "TSO",
                "region": "Munster",
                "seats": 3,
                "status": "Results Pending"
            },
            {
                "name": "Waterford",
                "code": "WRD",
                "region": "Leinster",
                "seats": 4,
                "status": "Results Pending"
            },
            {
                "name": "Wexford",
                "code": "WXD",
                "region": "Leinster",
                "seats": 5,
                "status": "Results Pending"
            },
            {
                "name": "Wicklow",
                "code": "WLW",
                "region": "Leinster",
                "seats": 5,
                "status": "Results Pending"
            }
        ];

        var constituency = jq('title').text().split('|')[0];
        constituency = constituency.substr(0, constituency.indexOf("constituency")).trim();

        jq(document).ready(function(){

            // FIXME: Remove in production
            var found = false;

            for(var i = 0; i < constituencyLookup.length; i++){

                if(constituencyLookup[i].name.toLowerCase() === constituency.toLowerCase()){

                    // FIXME: Remove in production
                    found = true;

                    var options = {
                        electionCode: "gen2011",
                        constituencyCode: constituencyLookup[i].code,
                        seats: constituencyLookup[i].seats
                    };

                    jq.fn.initConstituency(options, function(data){

                        if(!data.err) {
                            jq(".constituency-spread").drawSpread(data);
                            jq(".constituency-legend").drawLegend(data);
                            jq(".constituency-meta").drawMeta(data);
                            jq(".constituency-count-table").drawCountTable(data, function(){
                                jq(".const-results-table").table().data("table").refresh();
                            });
                        } else {
                            jq(".constituency-spread").nullState("spread");
                            jq(".constituency-legend").nullState("legend");
                            jq(".constituency-meta").nullState("meta");
                            jq(".constituency-count-table").nullStateTable(data, function () {
                                jq(".const-results-table").table().data("table").refresh();
                            });
                        }

                    });

                    var ganimationContainer = jq(".ganimation-container");

                    ganimationContainer.initConstituencyAnimation(options, function() {
                        var playBtn = jq('.ganimation-play-btn');
                        var pauseBtn = jq('.ganimation-pause-btn');
                        var restartBtn = jq('.ganimation-restart-btn');

                        playBtn.attr('disabled', false);
                        playBtn.click(function () {
                            playBtn.attr('disabled', true);
                            pauseBtn.attr('disabled', false);
                            restartBtn.attr('disabled', false);
                            ganimationContainer.playCountAnimation()
                        });

                        pauseBtn.click(function () {
                            playBtn.attr('disabled', false);
                            pauseBtn.attr('disabled', true);
                            restartBtn.attr('disabled', false);
                            ganimationContainer.pauseCountAnimation()
                        });

                        restartBtn.click(function () {
                            playBtn.attr('disabled', false);
                            pauseBtn.attr('disabled', true);
                            restartBtn.attr('disabled', true);
                            ganimationContainer.restartCountAnimation()
                        });
                    });

                    break;
                }
            }

            // FIXME: Remove in production
            if(found === false) {
                // Not found in the lookup
                jq(".constituency-lookup-failed").css("display", "block");
            }
        });

        jq(document).ajaxError(function(){
            jq(".constituency-spread").nullState("spread");
            jq(".constituency-legend").nullState("legend");
            jq(".constituency-meta").nullState("meta");
            jq(".constituency-count-table").nullStateTable(data, function(){
                jq(".const-results-table").table().data("table").refresh();
            });
        });

    </script>
